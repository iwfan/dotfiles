set shellopts '-eu'
set ifs "\n"
set number on
set mouse on
set relativenumber on
set icons on
set drawbox on
set scrolloff 5
set tabstop 4
set incsearch on
set ignorecase true
set hiddenfiles '.git'
set previewer ~/.config/lf/lf_kitty_preview.sh
set cleaner ~/.config/lf/lf_kitty_clean.sh

cmd open ${{
    test -L $f && f=$(readlink -f $f)
    case $(file --mime-type $f -b) in
        text/*|application/json) $EDITOR "$f";;
        *) for f in $fx; do setsid $OPENER $f > /dev/null 2> /dev/null & done;;
    esac
}}

cmd copy_filename %{{
  $(basename $f | pbcopy)
  echo "Copied: $(basename $f)"
}}

cmd copy_filepath %{{
  $(realpath $f | pbcopy)
  echo "Copied: $(realpath $f)"
}}

cmd trash %trash $fx

map <enter> shell

map <c-f> $lf -remote "send $id select $(fzf)"
map <c-o> $lf -remote "send $id cd $(fzf)"
map <c-r> reload

map A push %mkdir<space>
map a push %touch<space>
map x cut
map d trash
map y copy
map Y copy_filename
map <c-y> copy_filepath
map C clear

map i :set info size:time
